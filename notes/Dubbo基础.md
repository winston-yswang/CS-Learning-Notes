**客户端（Client）：** 服务的调用方。

**服务端（Server）：**真正的服务提供者。

**客户端存根：**存放服务端的地址消息，再将客户端的请求参数打包成网络消息，然后通过网络远程发送给服务方。

**服务端存根：**接收客户端发送过来的消息，将消息解包，并调用本地的方法。



分布式服务架构下的难点是：远程服务调用和业务拆分



## 1、Dubbo基础

### 1.1 什么是Dubbo？

Apache Dubbo 是一款高性能、轻量级的开源Java RPC 框架，它提供了三大核心能力：**面向接口的远程方法调用，智能容错和负载均衡，以及服务自动注册和发现**。简单来说 Dubbo 是一个分布式服务框架，致力于提供高性能和透明化的RPC远程服务调用方案，以及SOA服务治理方案。

Dubbo具有基于透明接口的RPC、智能负载平衡、自动服务注册和发现、高扩展性、运行时流量路由、可视化服务治理等特点。

### 1.2 Dubbo架构

<img src="pics\dubbo架构.png" alt="dubbo架构" style="zoom:50%;" />

**上述节点简单说明：**

- **Provider** 暴露服务的服务提供方
- **Consumer** 调用远程服务的服务消费方
- **Registry** 服务注册与发现的注册中心
- **Monitor** 统计服务的调用次数和调用时间的监控中心
- **Container** 服务运行容器

**调用关系说明：**

1. 服务容器负责启动，加载，运行服务提供者。
2. 服务提供者在启动时，向注册中心注册自己提供的服务。
3. 服务消费者在启动时，向注册中心订阅自己所需的服务。
4. 注册中心返回服务提供者地址列表给消费者，如果有变更，注册中心将基于长连接推送变更数据给消费者。
5. 服务消费者，从提供者地址列表中，基于软负载均衡算法，选一台提供者进行调用，如果调用失败，再选另一台调用。
6. 服务消费者和提供者，在内存中累计调用次数和调用时间，定时每分钟发送一次统计数据到监控中心。







